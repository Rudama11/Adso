{% extends 'body.html' %}
{% load widget_tweaks %}

{% block contenido %}

<form method="post" action="." id="deleteForm">
    <div class="card card-default">
        <div class="card-header">
            <h3 class="card-title">
                <i class="fas fa-trash"></i>
                {{titulo}}
            </h3>
        </div>
        <div class="card-body">
            {% csrf_token %}
            {% if form.errors %}
            <div class="alert alert-danger alert-dismissible">
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">x</button>
                <h5><i class="icon fas fa-ban"></i> Ha ocurrido un error al intentar
                    eliminar un registro</h5>
                <ul>
                    {% for field in form %}
                    {% for error in field.errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
            <div class="alert alert-danger alert-dismissible">
                <h5><i class="icon fas fa-ban"></i> Advertencia!</h5>
                Deseas eliminar el registro #{{object.id}}?
            </div>
        </div>
        <div class="card-footer">
            <button type="button" class="btn btn-success" id="confirmDelete">
                <i class="fas fa-save"></i> Si, Aceptar
            </button>
            <a href="{{ listar_url }}" class="btn btn-info btn-flat">
                <i class="fas fa-times"></i> Cancelar
            </a>
        </div>
    </div>
</form>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    document.getElementById('confirmDelete').addEventListener('click', function(e) {
        e.preventDefault(); 
        Swal.fire({
            title:'¡¡ADVERTENCIA!!',                       
			text:'¿Deseas Eliminar esta información?',                         
			icon: 'error',                          
			confirmButtonText:'Eliminar',
            confirmButtonColor: '#3085d6',
			footer:'<span>Aviso: Si borras la información no podrás recuperarla</span>',                    
			backdrop:true,                 
			position: 'center',             
			allowOutsideClick:false, 
			allowEscapeKey:false,      
			allowEnterKey:false,         
			stopKeydownPropagation:false, 
			showCancelButton:true, 
			cancelButtonText:'Cancelar', 
			cancelButtonColor: '#d33',
			cancelButtonAriaLabel: 'Cancelar',
			buttonsStyling:true, 
			showCloseButton:true,
			closeButtonAriaLabel:'Cerrar Alerta'
        }).then((result) => {
            if (result.isConfirmed) {
                document.getElementById('deleteForm').submit();
            }
        });
    });
</script>
{% endblock %}