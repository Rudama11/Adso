{% extends "listar.html" %}
{# Extiende la plantilla base 'listar.html' #}

{% load static %}
{# Carga la etiqueta estática para usar archivos estáticos #}

{% block filtro_form_contenido %}
{# Bloque para el formulario de filtrado #}
<form method="GET" action="{% url 'app:ubicacion_listarU' %}">
    <div class="form-group">
        <label for="departamento">Departamento</label>
        <select class="form-control" id="departamento" name="departamento">
            <option value="">Todos</option>
            {% for departamento in departamentos %}
            <option value="{{ departamento.id }}" {% if request.GET.departamento == departamento.id|stringformat:"s" %}selected{% endif %}>
                {{ departamento.nombre }}
            </option>
            {% endfor %}
        </select>
        {# Selector para filtrar por departamento #}
    </div>

    <div class="form-group">
        <label for="municipio">Municipio</label>
        <select class="form-control" id="municipio" name="municipio">
            <option value="">Todos</option>
            {% for municipio in municipios %}
            <option value="{{ municipio.id }}" {% if request.GET.municipio == municipio.id|stringformat:"s" %}selected{% endif %}>
                {{ municipio.nombre }}
            </option>
            {% endfor %}
        </select>
        {# Selector para filtrar por municipio #}
    </div>

    <button type="submit" class="btn btn-primary">Filtrar</button>
    {# Botón para enviar el formulario de filtrado #}
</form>
{% endblock %}

{% block columnas %}
{# Bloque para definir las columnas de la tabla #}
<tr>
    <th scope="col">Id</th>
    <th scope="col">Departamento</th>
    <th scope="col">Municipio</th>
    <th scope="col">Opciones</th>
</tr>
{% endblock %}

{% block filas %}
{# Bloque para definir las filas de la tabla #}
{% for u in object_list %}
<tr>
    <td>{{ u.id }}</td>
    <td>{{ u.departamento.nombre }}</td>
    <td>{{ u.municipio.nombre }}</td>
    <td>
        <a href="{% url 'app:ubicacion_editar' u.id %}" class="btn btn-info btn-sm" title="Editar ubicación">
            <i class="fas fa-edit"></i>
        </a>
        {# Enlace para editar la ubicación #}
        <a href="{% url 'app:ubicacion_eliminar' u.id %}" class="btn btn-danger btn-sm" title="Eliminar ubicación">
            <i class="fas fa-trash"></i>
        </a>
        {# Enlace para eliminar la ubicación #}
    </td>
</tr>
{% endfor %}
{% endblock %}